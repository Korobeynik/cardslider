!function(a){"object"==typeof module&&"object"==typeof module.exports?a(require("jquery"),window,document):a(jQuery,window,document)}(function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this._cards=[],this._activeCard=null,this._directionClass="cardslider--direction-"+this.settings.direction,this._animationClassBack="cardslider--sortback-"+this.settings.direction,this._animationClassFront="cardslider--sortfront-"+this.settings.direction,this._$dotnav=null,this._$directionnav=null,this._buttonNext=null,this._buttonPrev=null,this.init()}var f="cardslider",g={keys:{next:38,prev:40},direction:"down",nav:!0,swipe:!1,dots:!1,loop:!1,beforeCardChange:null,afterCardChange:null};a.extend(e.prototype,{init:function(){this.initCards(),this.settings.nav&&this.initNav(),this.settings.dots&&this.initDots(),a.event.special.swipe&&this.settings.swipe&&this.initSwipe(),this.settings.keys!==!1&&a(b).on("keydown.cardslider",this.keyNav.bind(this)),this.changeCardTo(0)},initCards:function(){var b=a(this.element);b.addClass("cardslider "+this._directionClass);var c=b.find("> ul");c.addClass("cardslider__cards");for(var d=c.find("li"),e=1,f=0,g=255,h=0;h<d.length;h++){var i={$elem:a(d[h]),active:0===h,index:h,cardClass:"cardslider__card--index-"+h};i.$elem.addClass("cardslider__card cardslider__card--transitions "+i.cardClass),i.$elem.css({"z-index":d.length-h}),this._cards.push(i),e-=.05,f-=20,g-=10}},initNav:function(){this._$directionnav=a('<div class="cardslider__direction-nav" />'),this._buttonNext=c.createElement("button"),this._buttonNext.title="next",this._buttonNext.className="cardslider__nav-next",this._buttonNext.innerHTML="Next",this._buttonNext.addEventListener("click",this.nextCard.bind(this)),this._buttonPrev=c.createElement("button"),this._buttonPrev.title="previous",this._buttonPrev.className="cardslider__nav-prev",this._buttonPrev.innerHTML="Prev",this._buttonPrev.addEventListener("click",this.prevCard.bind(this)),this._$directionnav.append(this._buttonNext),this._$directionnav.append(this._buttonPrev),a(this.element).append(this._$directionnav)},initDots:function(){var b=this;this._$dotnav=a('<ul class="cardslider__dots-nav" />');for(var c=this._cards.length,d=0,e=d;c>e;e++){var f=a('<a href="#" />');f.attr("data-slide",e),f.on("click.cardslider",function(c){c.preventDefault(),b.changeCardTo(a(this).data("slide"))});var g=a('<li class="cardslider__dot" />');this._$dotnav.append(g.append(f))}a(this.element).append(this._$dotnav)},initSwipe:function(){a(this.element).find(".cardslider__cards").on("swipeup.cardslider",this.prevCard.bind(this)),a(this.element).find(".cardslider__cards").on("swipedown.cardslider",this.nextCard.bind(this))},keyNav:function(a){a.keyCode==this.settings.keys.next?(a.preventDefault(),this.nextCard()):a.keyCode==this.settings.keys.prev&&(a.preventDefault(),this.prevCard())},nextCard:function(){this._activeCard.index+1<this._cards.length?this.changeCardTo(this._activeCard.index+1):this.settings.loop&&this.changeCardTo(0,!0)},prevCard:function(){this._activeCard.index-1>=0?this.changeCardTo(this._activeCard.index-1):this.settings.loop&&this.changeCardTo(-1*(this._cards.length-1))},changeCardTo:function(a,b){b="undefined"!=typeof b?b:!1,"string"==typeof a&&(a="first"==a?0:this._cards.length-1);var c=Math.abs(a),d=this._activeCard,e=this._cards[c];if(this.settings.loop)for(var f=0;f<this._cards.length;f++)this._cards[f].$elem.removeClass(this._animationClassFront+" "+this._animationClassBack),this._cards[f].$elem.addClass("cardslider__card--transitions");if("function"==typeof this.settings.beforeCardChange&&this.settings.beforeCardChange(d.index),d&&(a>d.index||a<d.index&&b)||!d&&a>0){for(var f=0;c>f;f++)this._cards[f].$elem.attr("aria-hidden",!0),this.settings.loop||this._cards[f].$elem.addClass("cardslider__card--out");this.settings.loop&&null!=d&&(d.$elem.removeClass("cardslider__card--transitions"),d.$elem.addClass(this._animationClassBack))}else if(d){this.settings.loop&&d&&(this._cards[c].$elem.removeClass("cardslider__card--transitions"),this._cards[c].$elem.addClass(this._animationClassFront));for(var f=this._cards.length-1;f>c;f--)this._cards[f].$elem.addClass("cardslider__card--out"),this._cards[f].$elem.attr("aria-hidden",!0)}return this._activeCard=e,this._activeCard.$elem.attr("aria-hidden",!1),this.reorderIndices(c),this.settings.dots&&this.changeDots(c),"function"==typeof this.settings.afterCardChange&&this.settings.afterCardChange(c),this},changeDots:function(a){this._$dotnav.find(".cardslider__dot--active").removeClass("cardslider__dot--active"),this._$dotnav.find(".cardslider__dot").eq(a).addClass("cardslider__dot--active")},reorderIndices:function(a){for(var b=0;b<this._cards.length;b++){var c=this._cards[b];b-a>=0?(c.$elem.removeClass(function(a,b){return(b.match(/cardslider__card--index-\d|cardslider__card--out/g)||[]).join(" ")}),c.$elem.addClass(this._cards[b-a].cardClass),this.settings.loop&&this.setZindex(c,this._cards.length-1-this._cards[b-a].index)):this.settings.loop&&(c.$elem.removeClass(function(a,b){return(b.match(/cardslider__card--index-\d|cardslider__card--out/g)||[]).join(" ")}),c.$elem.addClass(this._cards[this._cards.length-(a-b)].cardClass),this.setZindex(c,this._cards.length-1-this._cards[this._cards.length-(a-b)].index))}},setZindex:function(a,b){a.$elem.css({"z-index":b})},destroy:function(){var c=a(this.element),d=c.find(".cardslider__cards");return c.removeClass(function(a,b){return(b.match(/card.*/g)||[]).join(" ")}),d.removeClass("cardslider__cards"),d.find(".cardslider__card").removeClass(function(a,b){return(b.match(/card.*/g)||[]).join(" ")}).removeAttr("style").removeAttr("aria-hidden"),this._$dotnav.remove(),this._$dotnav=null,this._$directionnav.remove(),this._$directionnav=null,this._cards=[],this._activeCard=null,a(b).off("keydown.cardslider"),this._buttonNext.removeEventListener("cardslider",this.nextCard),this._buttonPrev.removeEventListener("cardslider",this.prevCard),this}}),a.fn[f]=function(b){return this.each(function(){a.data(this,f)||a.data(this,f,new e(this,b))})}});